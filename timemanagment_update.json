{
    "updateProjectTask": {
        "name": "Update Project Task",
        "description": "Updates an existing project task with new information. Users can only update their own project tasks. Includes activity logging and analytics updates.",
        "request": {
            "method": "PUT",
            "url": "/api/time-management/project-tasks/{id}",
            "headers": {
                "Authorization": "Bearer {token}",
                "Content-Type": "application/json",
                "Accept": "application/json"
            },
            "parameters": {
                "path": {
                    "id": {
                        "type": "integer",
                        "required": true,
                        "description": "The ID of the project task to update"
                    }
                }
            },
            "body": {
                "title": {
                    "type": "string",
                    "required": false,
                    "max_length": 255,
                    "description": "The title of the project task"
                },
                "description": {
                    "type": "text",
                    "required": false,
                    "description": "Detailed description of the project task"
                },
                "status": {
                    "type": "string",
                    "required": false,
                    "enum": ["to-do", "doing", "done", "blocked"],
                    "description": "Current status of the project task"
                },
                "due_date": {
                    "type": "date",
                    "required": false,
                    "format": "Y-m-d",
                    "description": "Due date for the project task"
                },
                "estimated_hours": {
                    "type": "numeric",
                    "required": false,
                    "min": 0,
                    "description": "Estimated hours to complete the task"
                },
                "actual_hours": {
                    "type": "numeric",
                    "required": false,
                    "min": 0,
                    "description": "Actual hours spent on the task"
                },
                "notes": {
                    "type": "text",
                    "required": false,
                    "description": "Additional notes for the project task"
                },
                "is_important": {
                    "type": "boolean",
                    "required": false,
                    "description": "Whether the task is marked as important"
                },
                "is_pinned": {
                    "type": "boolean",
                    "required": false,
                    "description": "Whether the task is pinned"
                },
                "progress_points": {
                    "type": "integer",
                    "required": false,
                    "min": 0,
                    "max": 100,
                    "description": "Progress points for the task (0-100)"
                }
            }
        },
        "response": {
            "success": {
                "status_code": 200,
                "body": {
                    "success": true,
                    "message": "Project task updated successfully",
                    "data": {
                        "id": 1,
                        "project_id": 1,
                        "employee_id": 1,
                        "title": "Updated Task Title",
                        "description": "Updated task description",
                        "status": "doing",
                        "due_date": "2025-06-15",
                        "estimated_hours": 10.5,
                        "actual_hours": 8.0,
                        "notes": "Updated notes",
                        "is_important": true,
                        "is_pinned": false,
                        "progress_points": 75,
                        "created_at": "2025-05-27T10:00:00.000000Z",
                        "updated_at": "2025-05-27T14:30:00.000000Z",
                        "project": {
                            "id": 1,
                            "name": "Sample Project",
                            "description": "Sample project description"
                        },
                        "employee": {
                            "id": 1,
                            "name": "John Doe",
                            "email": "john@example.com"
                        }
                    }
                }
            },
            "error": {
                "validation_error": {
                    "status_code": 422,
                    "body": {
                        "success": false,
                        "message": "Validation failed",
                        "errors": {
                            "title": ["The title field must not be greater than 255 characters."],
                            "status": ["The selected status is invalid."],
                            "due_date": ["The due date does not match the format Y-m-d."],
                            "estimated_hours": ["The estimated hours must be at least 0."],
                            "actual_hours": ["The actual hours must be at least 0."],
                            "progress_points": ["The progress points must be between 0 and 100."]
                        }
                    }
                },
                "not_found": {
                    "status_code": 404,
                    "body": {
                        "success": false,
                        "message": "Project task not found"
                    }
                },
                "unauthorized": {
                    "status_code": 401,
                    "body": {
                        "success": false,
                        "message": "Unauthorized. Please provide a valid Bearer token."
                    }
                },
                "forbidden": {
                    "status_code": 403,
                    "body": {
                        "success": false,
                        "message": "You can only update your own project tasks"
                    }
                },
                "server_error": {
                    "status_code": 500,
                    "body": {
                        "success": false,
                        "message": "An error occurred while updating the project task"
                    }
                }
            }
        },
        "validation_rules": {
            "title": "sometimes|string|max:255",
            "description": "sometimes|string",
            "status": "sometimes|string|in:to-do,doing,done,blocked",
            "due_date": "sometimes|date_format:Y-m-d",
            "estimated_hours": "sometimes|numeric|min:0",
            "actual_hours": "sometimes|numeric|min:0",
            "notes": "sometimes|string",
            "is_important": "sometimes|boolean",
            "is_pinned": "sometimes|boolean",
            "progress_points": "sometimes|integer|min:0|max:100"
        },
        "authentication": {
            "required": true,
            "type": "Bearer Token",
            "description": "User must be authenticated with a valid Bearer token"
        },
        "authorization": {
            "description": "Users can only update their own project tasks. The system checks if the authenticated user is the owner of the project task."
        },
        "side_effects": {
            "activity_logging": "Creates an activity log entry when the project task is updated",
            "analytics_update": "Updates employee productivity analytics based on task progress and time tracking"
        },
        "notes": [
            "All fields are optional in the update request - only provided fields will be updated",
            "The 'sometimes' validation rule means the field is only validated if present in the request",
            "Activity logging captures the changes made to the project task for audit purposes",
            "Analytics are automatically updated when actual_hours or progress_points are modified",
            "The response includes the complete updated project task with related project and employee information"
        ]
    }
}
